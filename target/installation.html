<html>
	<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="UTF-8" />
		<title> インストール - Mithril.js</title>
		<link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css' />
		<link href="lib/prism/prism.css" rel="stylesheet" />
		<link href="style.css" rel="stylesheet" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	</head>
	<body>
		<header>
			<section>
				<a class="hamburger" href="javascript:;">≡</a>
				<h1><img src="logo.svg">  Mithril <small>1.0.1</small></h1>
				<nav>
					<a href="index.html">ガイド</a> <a href="api.html">API</a> <a href="https://gitter.im/lhorie/mithril.js">チャット</a> <a href="https://github.com/lhorie/mithril.js">Github</a>
				</nav>
			</section>
		</header>
		<main>
			<section>
				<h1 id="installation">インストール</h1>
<ul>
<li>チュートリアル<ul>
<li><strong><a href="installation.html">インストール</a></strong><ul>
<li><a href="#cdn">CDN</a></li>
<li><a href="#npm">NPM</a></li>
</ul>
</li>
<li><a href="index.html">イントロダクション</a></li>
<li><a href="simple-application.html">チュートリアル</a></li>
</ul>
</li>
<li>リソース<ul>
<li><a href="jsx.html">JSX</a></li>
<li><a href="es6.html">ES6</a></li>
<li><a href="css.html">CSS</a></li>
<li><a href="animation.html">アニメーション</a></li>
<li><a href="testing.html">テスト</a></li>
<li><a href="examples.html">サンプル</a></li>
</ul>
</li>
<li>重要なコンセプト<ul>
<li><a href="vnodes.html">Vノード</a></li>
<li><a href="components.html">コンポーネント</a></li>
<li><a href="lifecycle-methods.html">ライフサイクルメソッド</a></li>
<li><a href="keys.html">キー</a></li>
<li><a href="autoredraw.html">自動再描画システム</a></li>
</ul>
</li>
<li>ソーシャル<ul>
<li><a href="https://github.com/lhorie/mithril.js/wiki/JOBS">Mithrilの求人</a></li>
<li><a href="contributing.html">貢献の仕方</a></li>
<li><a href="credits.html">クレジット</a></li>
</ul>
</li>
<li>その他<ul>
<li><a href="framework-comparison.html">フレームワークの比較</a></li>
<li><a href="change-log.html">変更履歴/移行</a></li>
</ul>
</li>
</ul>
<h3 id="cdn">CDN</h3>
<p>もし、JavaScriptにまだ不慣れであったり、セットアップの作業をなるべく簡単に終わらせたいのであれば<a href="https://ja.wikipedia.org/wiki/%E3%82%B3%E3%83%B3%E3%83%86%E3%83%B3%E3%83%84%E3%83%87%E3%83%AA%E3%83%90%E3%83%AA%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF">CDN</a>からMithrilを取得できます:</p>
<pre><code class="lang-markup">&lt;script src="https://unpkg.com/mithril/mithril.js"&gt;&lt;/script&gt;
</code></pre>
<hr>
<h3 id="npm">NPM</h3>
<h4 id="quick-start-with-webpack">WebPackを使ったクイックスタート</h4>
<pre><code class="lang-bash"># 1) インストール
npm install mithril --save

npm install webpack --save

# 2) package.jsonのscriptsセクションに次の行を足す
#    "scripts": {
#        "start": "webpack src/index.js bin/app.js --watch"
#    }

# 3) `src/index.js` ファイルを作成する

# 4) `&lt;script src="bin/app.js"&gt;&lt;/script&gt;` という内容を含む `index.html` ファイルを作成する 

# 5) バンドラーを実行
npm start

# 6) ブラウザで `index.html` を開く
open index.html
</code></pre>
<h4 id="step-by-step">ステップ・バイ・ステップ</h4>
<p>プロダクションのためのプロジェクトであれば、推奨はNPMを使ってMithrilをインストールする方法です。</p>
<p>NPM (Node package manager)はNode.jsにバンドルされているデフォルトのパッケージマネージャーです。NPMは、JavaScriptのエコシステム内で、クライアントサイド、サーバーサイドの両方のライブラリのパッケージマネージャーとして使われています。<a href="https://nodejs.org">Node.js</a>をダウンロードしてインストールすると、NPMも自動的にインストールされます。</p>
<p>NPM経由でMithrilを使うには、プロジェクトフォルダに行きコマンドラインから、<code>npm init --yes</code>を実行します。<code>package.json</code>という名前のファイルができます。</p>
<pre><code class="lang-bash">npm init --yes
# package.jsonという名前のファイルができる
</code></pre>
<p>次のコマンドを実行するとMithrilがインストールされます:</p>
<pre><code class="lang-bash">npm install mithril --save
</code></pre>
<p>このコマンドを実行すると、<code>node_modules</code>というフォルダができ、その中に<code>mithril</code>フォルダができます。<code>package.json</code>ファイル内の<code>dependencies</code>にも、エントリーが追加されます。</p>
<p>これでMithrilを使う準備ができました。CommonJSのモジュール形式を使ってコードを構成するスタイルが推奨です:</p>
<pre><code class="lang-javascript">// index.js
var m = require("mithril")

m.render(document.body, "hello world")
</code></pre>
<p>モジュール化はコードを複数のファイルに分割するための方法です。モジュール化を行うことでコードを探しやすくなったり、コードの依存関係が分かりやすくなったり、テストしやすくなります。</p>
<p>CommonJSはJavaScriptのコードをモジュール化するためのデファクトスタンダードです。Node.js、<a href="http://browserify.org/">Browserify</a>、<a href="https://webpack.js.org/">WebPack</a>といったツールでサポートされています。この方法はES6モジュールのさきがけとして、他のモジュール化の方式との競争で勝ち残ってきた信頼できる方式です。ECMAScript 6でES6モジュールの文法が策定されましたが、実際のモジュールロードのメカニズムとしてはまだ使えません。もしまだ標準的な実装として使用できる段階にないES6モジュールを使いたい場合は、<a href="http://rollupjs.org/">Rollup</a>, <a href="https://babeljs.io/">Babel</a>, <a href="https://github.com/google/traceur-compiler">Traceur</a>といったツールを使います。</p>
<p>今日のほとんどのブラウザはネイティブではモジュールシステム(CommonJSあるいはES6)をサポートしていません。そのため、実行前にバンドル化して1つのJavaScriptファイルにする必要があります。</p>
<p>バンドルを作成する方法として一般的な<a href="https://webpack.js.org/">WebPack</a>を使うNPMスクリプトのセットアップをしましょう。WebPackをインストールするには、次のようにコマンドラインから実行します:</p>
<pre><code class="lang-bash">npm install webpack --save-dev
</code></pre>
<p>以前作成した<code>package.json</code>ファイルを開き、<code>scripts</code>セクションに次の内容を追加します:</p>
<pre><code>{
    "name": "my-project",
    "scripts": {
        "start": "webpack src/index.js bin/app.js -d --watch"
    }
}
</code></pre><p>このファイルはJSONファイルなので、<code>"scripts"</code>や<code>"start"</code>といったキー名はダブルクオートで括る必要があります。</p>
<p><code>-d</code>フラグを使うと、WebPackに開発者モードで実行するように指示できます。ソースマップが生成されて、デバッグがやりやすくなります。</p>
<p><code>--watch</code>フラグを使うと、ファイルシステムの変更を監視し、変更を検知すると<code>app.js</code>が自動生成されるようになります。</p>
<p>コマンドラインウインドウで<code>npm start</code>と入力するとこのスクリプトが実行できます。NPMのパスにある<code>webpack</code>コマンドが実行され、<code>index.js</code>ファイルを読み込んで<code>app.js</code>ファイルが生成されます。このファイルには、Mithrilと上記の<code>hello world</code>の両方のコードが含まれます。コマンドラインから直接<code>webpack</code>コマンドを実行するには、<code>node_modules/.bin</code>をパスに追加するか、<code>npm install webpack -g</code>を使ってWebPackをグローバルにインストールする必要があります。しかし、ローカルにインストールして、npmスクリプトを使って実行する方法が推奨です。この方法であれば、他のコンピューターでも同じ環境を再現して実行しやすいからです。</p>
<pre><code>npm start
</code></pre><p>バンドルファイルが作成されると、HTMLファイルから<code>bin/app.js</code>というパスで参照できます。</p>
<pre><code class="lang-markup">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello world&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src="bin/app.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>すでに説明したとおり、CommonJSでは<code>require</code>関数を使うとモジュールのインポートが行えます。NPMモジュールはライブラリ名（例えば、<code>require("mithril")</code>、<code>require("jquery")</code>）で参照できます。また、自分自身のモジュールは、拡張子なしの現在のパスからの相対パス（例えば、同じフォルダにある<code>mycomponent.js</code>というファイルであれば、<code>require("./mycomponent")</code>呼び出しで）参照できます。</p>
<p>モジュールの要素をエクスポートするには、特別な<code>module.exports</code>オブジェクトにアサインします。</p>
<pre><code class="lang-javascript">// mycomponent.js
module.exports = {
    view: function() {return "hello from a module"}
}
</code></pre>
<p><code>index.js</code>では、次のようなコードを書いて、エクスポートされた要素をインポートします:</p>
<pre><code class="lang-javascript">// index.js
var m = require("mithril")

var MyComponent = require("./mycomponent")

m.mount(document.body, MyComponent)
</code></pre>
<p>このサンプルでは<code>m.mount</code>を使っています。この関数を使うとMithrilの自動再描画システムが有効化されます。ほとんどのMithrilアプリケーションでは、<code>m.mount</code>（複数スクリーンを扱うときは<code>m.route</code>）を使うことになります。これらの関数を使うと、変更が必要な時に手動で再描画を実行しなくても、自動再描画システムのメリットが享受できます。</p>
<h4 id="production-build">本番ビルド</h4>
<p>bin/app.jsを開くと、WebPackが生成したバンドルファイルがミニファイされていないことが分かります。これはアプリケーションをこのまま実際にリリースするには最適化の余地があります。ミニファイしたファイルを生成するには、<code>package.json</code>を開いて新しいnpmスクリプトを追加します:</p>
<pre><code>{
    "name": "my-project",
    "scripts": {
        "start": "webpack src/index.js bin/app.js -d --watch",
        "build": "webpack src/index.js bin/app.js -p",
    }
}
</code></pre><p>本番環境ではフックを使ってスクリプトの本番ビルドを自動でビルドさせることができます。次のコードは<a href="https://www.heroku.com/">Heroku</a>を使うサンプルです:</p>
<pre><code>{
    "name": "my-project",
    "scripts": {
        "start": "webpack -d --watch",
        "build": "webpack -p",
        "heroku-postbuild": "webpack -p"
    }
}
</code></pre><hr>
<h3 id="alternate-ways-to-use-mithril">Mithrilを使う別の方法</h3>
<h4 id="live-reload-development-environment">ライブリロードを行う開発環境</h4>
<p>ライブリロードは、コードの変更時に自動で画面のリロードを行う機能です。<a href="https://github.com/mattdesl/budo">Budo</a>はライブリロードを可能にしてくれるツールの１つです。</p>
<pre><code class="lang-bash"># 1) インストール
npm install mithril --save
npm install budo -g

# 2) 次の行をpackage.jsonのscriptsセクションに追加する
#    "scripts": {
#        "start": "budo --live --open index.js"
#    }

# 3) `index.js` ファイルを作成する

# 4) budoを実行する
npm start
</code></pre>
<p><code>index.js</code>がコンパイル（バンドル化）されて、ブラウザウィンドウが開いてそのファイルが表示されます。ソースファイルが変更されると再コンパイルされて、ブラウザがリフレッシュし、その変更が表示されます。</p>
<h4 id="mithril-bundler">Mithrilバンドラー</h4>
<p>Mithrilにはバンドラーツールが添付されています。これはMithril以外に依存を持たないES5ベースのプロジェクトでのみ使えますが、他のNPMの依存が必要な場合にはまだexperimentalです。このツールはWebPackよりも小さいバンドルを生成しますが、まだ本番環境では使わないでください。</p>
<p>もし、このツールを試用してみてフィードバックをコミュニティに提供していただけるのであれば、<code>package.json</code>ファイルを開き、WebPackを使うスクリプトの部分を次のように変更します:</p>
<pre><code>{
    "name": "my-project",
    "scripts": {
        "build": "bundle index.js --output app.js --watch"
    }
}
</code></pre><h4 id="vanilla">バニラJS</h4>
<p>会社のセキュリティポリシーが理由でバンドルスクリプトを実行できない場合は、モジュールシステムをまったく使用しないで使うこともできます:</p>
<pre><code class="lang-markup">&lt;html&gt;
  &lt;head&gt;
    &lt;title&gt;Hello world&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script src="https://cdn.rawgit.com/lhorie/mithril.js/rewrite/mithril.js"&gt;&lt;/script&gt;
    &lt;script src="index.js"&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<pre><code class="lang-javascript">// index.js

// もしCommonJS環境外でロードされると、Mithrilはグローバルスコープに登録されます
m.render(document.body, "hello world")
</code></pre>

				<hr />
				<small>License: MIT. © Leo Horie.</small>
			</section>
		</main>
		<script src="lib/prism/prism.js"></script>
		<script>
		document.querySelector(".hamburger").onclick = function() {
			document.body.className = document.body.className === "navigating" ? "" : "navigating"
			document.querySelector("h1 + ul").onclick = function() {
				document.body.className = ''
			}
		}
		</script>
	</body>
</html>
